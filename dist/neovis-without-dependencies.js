!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("neo4j-driver"),require("vis/dist/vis-network.min"),require("core-js/modules/es.symbol"),require("core-js/modules/es.symbol.description"),require("core-js/modules/es.symbol.iterator"),require("core-js/modules/es.array.iterator"),require("core-js/modules/es.object.define-property"),require("core-js/modules/es.object.to-string"),require("core-js/modules/es.string.iterator"),require("core-js/modules/web.dom-collections.iterator"),require("core-js/modules/es.array.concat"),require("core-js/modules/es.array.for-each"),require("core-js/modules/es.array.map"),require("core-js/modules/es.function.name"),require("core-js/modules/es.object.keys"),require("core-js/modules/es.object.values"),require("core-js/modules/es.promise"),require("core-js/modules/web.dom-collections.for-each"),require("core-js/modules/web.timers"),require("regenerator-runtime/runtime"),require("vis/dist/vis-network.min.css")):"function"==typeof define&&define.amd?define(["neo4j-driver","vis/dist/vis-network.min","core-js/modules/es.symbol","core-js/modules/es.symbol.description","core-js/modules/es.symbol.iterator","core-js/modules/es.array.iterator","core-js/modules/es.object.define-property","core-js/modules/es.object.to-string","core-js/modules/es.string.iterator","core-js/modules/web.dom-collections.iterator","core-js/modules/es.array.concat","core-js/modules/es.array.for-each","core-js/modules/es.array.map","core-js/modules/es.function.name","core-js/modules/es.object.keys","core-js/modules/es.object.values","core-js/modules/es.promise","core-js/modules/web.dom-collections.for-each","core-js/modules/web.timers","regenerator-runtime/runtime","vis/dist/vis-network.min.css"],r):"object"==typeof exports?exports.NeoVis=r(require("neo4j-driver"),require("vis/dist/vis-network.min"),require("core-js/modules/es.symbol"),require("core-js/modules/es.symbol.description"),require("core-js/modules/es.symbol.iterator"),require("core-js/modules/es.array.iterator"),require("core-js/modules/es.object.define-property"),require("core-js/modules/es.object.to-string"),require("core-js/modules/es.string.iterator"),require("core-js/modules/web.dom-collections.iterator"),require("core-js/modules/es.array.concat"),require("core-js/modules/es.array.for-each"),require("core-js/modules/es.array.map"),require("core-js/modules/es.function.name"),require("core-js/modules/es.object.keys"),require("core-js/modules/es.object.values"),require("core-js/modules/es.promise"),require("core-js/modules/web.dom-collections.for-each"),require("core-js/modules/web.timers"),require("regenerator-runtime/runtime"),require("vis/dist/vis-network.min.css")):e.NeoVis=r(e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0])}(window,function(e,r,t,o,n,s,i,a,c,u,l,d,f,p,m,v,b,h,y,g,j){return function(e){var r={};function t(o){if(r[o])return r[o].exports;var n=r[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,t),n.l=!0,n.exports}return t.m=e,t.c=r,t.d=function(e,r,o){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var n in e)t.d(o,n,function(r){return e[r]}.bind(null,n));return o},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=21)}([function(r,t){r.exports=e},function(e,t){e.exports=r},function(e,r){e.exports=t},function(e,r){e.exports=o},function(e,r){e.exports=n},function(e,r){e.exports=s},function(e,r){e.exports=i},function(e,r){e.exports=a},function(e,r){e.exports=c},function(e,r){e.exports=u},function(e,r){e.exports=l},function(e,r){e.exports=d},function(e,r){e.exports=f},function(e,r){e.exports=p},function(e,r){e.exports=m},function(e,r){e.exports=v},function(e,r){e.exports=b},function(e,r){e.exports=h},function(e,r){e.exports=y},function(e,r){e.exports=g},function(e,r){e.exports=j},function(e,r,t){"use strict";t.r(r);t(2),t(3),t(4),t(10),t(11),t(5),t(12),t(13),t(6),t(14),t(7),t(15),t(16),t(8),t(17),t(9),t(18),t(19);var o=t(0),n=t.n(o),s=t(1),i=(t(20),{neo4j:{initialQuery:"MATCH (n) WHERE exists(n.pagerank)\n                        WITH (n), RAND() AS random\n                        ORDER BY random LIMIT 3000\n                        OPTIONAL MATCH (n)-[r]-(m)\n                        //WITH n,r,m WHERE exists(n.pagerank) AND exists(m.pagerank) AND exists(m.community)\n                        RETURN n, r, m;",neo4jUri:"bolt://localhost:7687",neo4jUser:"neo4j",neo4jPassword:"neo4j",encrypted:"ENCRYPTION_OFF",trust:"TRUST_ALL_CERTIFICATES"},visjs:{interaction:{hover:!0,hoverConnectedEdges:!0,selectConnectedEdges:!1,multiselect:"alwaysOn",zoomView:!1,experimental:{}},physics:{barnesHut:{damping:.1}},nodes:{mass:4,shape:"neo",labelHighlightBold:!1,widthConstraint:{maximum:40},heightConstraint:{maximum:40}},edges:{hoverWidth:0,selectionWidth:0,smooth:{type:"continuous",roundness:.15},font:{size:9,strokeWidth:0,align:"top"},color:{inherit:!1},arrows:{to:{enabled:!0,type:"arrow",scaleFactor:.5}}}}});function a(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var c="completed",u=function(){function e(){var r,t,o;!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this._handlers=(o=[],(t=c)in(r={})?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o,r)}var r,t,o;return r=e,(t=[{key:"register",value:function(e,r){if(void 0===this._handlers[e])throw new Error("Unknown event: "+e);this._handlers[e].push(r)}},{key:"generateEvent",value:function(e,r){if(void 0===this._handlers[e])throw new Error("Unknown event: "+e);var t=!0,o=!1,n=void 0;try{for(var s,i=this._handlers[e][Symbol.iterator]();!(t=(s=i.next()).done);t=!0){(0,s.value)(r)}}catch(e){o=!0,n=e}finally{try{t||null==i.return||i.return()}finally{if(o)throw n}}}}])&&a(r.prototype,t),o&&a(r,o),e}();function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,r,t,o,n,s,i){try{var a=e[s](i),c=a.value}catch(e){return void t(e)}a.done?r(c):Promise.resolve(c).then(o,n)}function f(e){return function(){var r=this,t=arguments;return new Promise(function(o,n){var s=e.apply(r,t);function i(e){d(s,o,n,i,a,"next",e)}function a(e){d(s,o,n,i,a,"throw",e)}i(void 0)})}}function p(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function m(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}t.d(r,"default",function(){return v});var v=function(){function e(r){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),m(this,"_nodes",{}),m(this,"_edges",{}),m(this,"_data",{}),m(this,"_network",null),m(this,"_events",new u),this._init(r),this._consoleLog(r),this._consoleLog(i)}var r,t,o;return r=e,(t=[{key:"_consoleLog",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"log";this._config.console_debug&&console[r](e)}},{key:"_init",value:function(e){this._config=e,this._encrypted=e.encrypted||i.neo4j.encrypted,this._trust=e.trust||i.neo4j.trust,this._driver=n.a.driver(e.server_url||i.neo4j.neo4jUri,n.a.auth.basic(e.server_user||i.neo4j.neo4jUser,e.server_password||i.neo4j.neo4jPassword),{encrypted:this._encrypted,trust:this._trust}),this._query=e.initial_cypher||i.neo4j.initialQuery,this._container=document.getElementById(e.container_id)}},{key:"_addNode",value:function(e){this._nodes[e.id]=e}},{key:"_addEdge",value:function(e){this._edges[e.id]=e}},{key:"buildNodeVisObject",value:function(){var e=f(regeneratorRuntime.mark(function e(r){var t,o,s,i,a,c,u,d,f,p,m,v,b,h,y,g,j,_,x,w,k,q;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={},o=r.labels[0],s=this._config&&this._config.labels&&this._config.labels[o],i=s&&s.caption,a=s&&s.size,c=s&&s.sizeCypher,u=s&&s.community,d=s&&s.title_properties||Object.keys(r.properties),t.id=r.identity.toInt(),!c){e.next=35;break}return f=this._driver.session(),e.next=13,f.run(c,{id:n.a.int(t.id)});case 13:for(p=e.sent,m=!0,v=!1,b=void 0,e.prev=17,h=p.records[Symbol.iterator]();!(m=(y=h.next()).done);m=!0)y.value.forEach(function(e){"number"==typeof e?t.value=e:n.a.isInt(e)&&(t.value=e.toNumber())});e.next=25;break;case 21:e.prev=21,e.t0=e.catch(17),v=!0,b=e.t0;case 25:e.prev=25,e.prev=26,m||null==h.return||h.return();case 28:if(e.prev=28,!v){e.next=31;break}throw b;case 31:return e.finish(28);case 32:return e.finish(25);case 33:e.next=36;break;case 35:"number"==typeof a?t.value=a:(g=r.properties[a])&&"number"==typeof g?t.value=g:g&&"object"===l(g)&&n.a.isInt(g)&&g.inSafeRange()?t.value=g.toNumber():t.value=1;case 36:if(t.label="function"==typeof i?i(r):r.properties[i]||o||"",u)try{r.properties[u]?t.group=r.properties[u].toNumber()||o||0:t.group=0}catch(e){t.group=0}else t.group=o;for(t.title="",j=!0,_=!1,x=void 0,e.prev=42,w=d[Symbol.iterator]();!(j=(k=w.next()).done);j=!0)q=k.value,r.properties.hasOwnProperty(q)&&(t.title+="<strong>".concat(q,":</strong> ").concat(r.properties[q],"<br>"));e.next=50;break;case 46:e.prev=46,e.t1=e.catch(42),_=!0,x=e.t1;case 50:e.prev=50,e.prev=51,j||null==w.return||w.return();case 53:if(e.prev=53,!_){e.next=56;break}throw x;case 56:return e.finish(53);case 57:return e.finish(50);case 58:return e.abrupt("return",t);case 59:case"end":return e.stop()}},e,this,[[17,21,25,33],[26,,28,32],[42,46,50,58],[51,,53,57]])}));return function(r){return e.apply(this,arguments)}}()},{key:"buildEdgeVisObject",value:function(e){var r=this._config&&this._config.relationships&&this._config.relationships[e.type],t=r&&r.thickness,o=r&&r.caption,n={};for(var s in n.id=e.identity.toInt(),n.from=e.start.toInt(),n.to=e.end.toInt(),n.title="",e.properties)e.properties.hasOwnProperty(s)&&(n.title+="<strong>".concat(s,":</strong> ").concat(e.properties[s],"<br>"));return n.value=t&&"string"==typeof t?e.properties[t]:t&&"number"==typeof t?t:1,n.label="boolean"==typeof o?o?e.type:"":o&&"string"==typeof o?e.properties[o]||"":e.type,n}},{key:"render",value:function(){var e=this,r=0,t=this._driver.session(),o=[];t.run(this._query,{limit:30}).subscribe({onNext:function(t){r++,e._consoleLog("CLASS NAME"),e._consoleLog(t.constructor.name),e._consoleLog(t);var s=Object.values(t.toObject()).map(function(){var r=f(regeneratorRuntime.mark(function r(t){var o,s,i,a,c,u,l,d,f,p,m,v,b,h,y,g,j,_;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(e._consoleLog("Constructor:"),e._consoleLog(t.constructor.name),!(t instanceof n.a.types.Node)){r.next=9;break}return r.next=5,e.buildNodeVisObject(t);case 5:o=r.sent;try{e._addNode(o)}catch(r){e._consoleLog(r,"error")}r.next=97;break;case 9:if(!(t instanceof n.a.types.Relationship)){r.next=14;break}s=e.buildEdgeVisObject(t),e._addEdge(s),r.next=97;break;case 14:if(!(t instanceof n.a.types.Path)){r.next=62;break}return e._consoleLog("PATH"),e._consoleLog(t),r.next=19,e.buildNodeVisObject(t.start);case 19:return i=r.sent,r.next=22,e.buildNodeVisObject(t.end);case 22:a=r.sent,e._addNode(i),e._addNode(a),c=!0,u=!1,l=void 0,r.prev=28,d=t.segments[Symbol.iterator]();case 30:if(c=(f=d.next()).done){r.next=46;break}return p=f.value,r.t0=e,r.next=35,e.buildNodeVisObject(p.start);case 35:return r.t1=r.sent,r.t0._addNode.call(r.t0,r.t1),r.t2=e,r.next=40,e.buildNodeVisObject(p.end);case 40:r.t3=r.sent,r.t2._addNode.call(r.t2,r.t3),e._addEdge(e.buildEdgeVisObject(p.relationship));case 43:c=!0,r.next=30;break;case 46:r.next=52;break;case 48:r.prev=48,r.t4=r.catch(28),u=!0,l=r.t4;case 52:r.prev=52,r.prev=53,c||null==d.return||d.return();case 55:if(r.prev=55,!u){r.next=58;break}throw l;case 58:return r.finish(55);case 59:return r.finish(52);case 60:r.next=97;break;case 62:if(!(t instanceof Array)){r.next=97;break}m=!0,v=!1,b=void 0,r.prev=66,h=t[Symbol.iterator]();case 68:if(m=(y=h.next()).done){r.next=83;break}if(g=y.value,e._consoleLog("Array element constructor:"),e._consoleLog(g.constructor.name),!(g instanceof n.a.types.Node)){r.next=79;break}return r.next=75,e.buildNodeVisObject(g);case 75:j=r.sent,e._addNode(j),r.next=80;break;case 79:g instanceof n.a.types.Relationship&&(_=e.buildEdgeVisObject(g),e._addEdge(_));case 80:m=!0,r.next=68;break;case 83:r.next=89;break;case 85:r.prev=85,r.t5=r.catch(66),v=!0,b=r.t5;case 89:r.prev=89,r.prev=90,m||null==h.return||h.return();case 92:if(r.prev=92,!v){r.next=95;break}throw b;case 95:return r.finish(92);case 96:return r.finish(89);case 97:case"end":return r.stop()}},r,null,[[28,48,52,60],[53,,55,59],[66,85,89,97],[90,,92,96]])}));return function(e){return r.apply(this,arguments)}}());o.push(Promise.all(s))},onCompleted:function(){var n=f(regeneratorRuntime.mark(function n(){var i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all(o);case 2:t.close(),i={interaction:{dragNodes:!0,dragView:!0,hover:!0,hoverConnectedEdges:!0,multiselect:!0,selectable:!0,selectConnectedEdges:!0,zoomView:!0},nodes:{shape:"dot",font:{size:26,strokeWidth:7},scaling:{label:{enabled:!0}}},edges:{arrows:{to:{enabled:e._config.arrows||!1}},length:200},layout:{improvedLayout:!1,hierarchical:{enabled:e._config.hierarchical||!1,sortMethod:e._config.hierarchical_sort_method||"hubsize"}},physics:{adaptiveTimestep:!0,stabilization:{iterations:200,fit:!0}}},a=e._container,e._data={nodes:new s.DataSet(Object.values(e._nodes)),edges:new s.DataSet(Object.values(e._edges))},e._consoleLog(e._data.nodes),e._consoleLog(e._data.edges),e._network=new s.Network(a,e._data,i),e._consoleLog("completed"),e._network.on("dragEnd",function(r){r.nodes.length>0&&e._data.nodes.update({id:r.nodes[0],fixed:{x:!0,y:!0}})}),e._network.on("dragStart",function(r){r.nodes.length>0&&e._data.nodes.update({id:r.nodes[0],fixed:{x:!1,y:!1}})}),e._network.on("doubleClick",function(r){r.nodes.length>0&&e._data.nodes.update({id:r.nodes[0],fixed:{x:!1,y:!1}})}),setTimeout(function(){e._network.stopSimulation()},1e4),e._events.generateEvent(c,{record_count:r});case 15:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}}(),onError:function(r){e._consoleLog(r)}})}},{key:"clearNetwork",value:function(){this._nodes={},this._edges={},this._network.setData([])}},{key:"registerOnEvent",value:function(e,r){this._events.register(e,r)}},{key:"reinit",value:function(e){this._init(e),this.render()}},{key:"reload",value:function(){this.clearNetwork(),this.render()}},{key:"stabilize",value:function(){this._network.stopSimulation(),this._consoleLog("Calling stopSimulation")}},{key:"renderWithCypher",value:function(e){this.clearNetwork(),this._query=e,this.render()}}])&&p(r.prototype,t),o&&p(r,o),e}()}])});
//# sourceMappingURL=neovis-without-dependencies.js.map